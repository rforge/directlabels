<!DOCTYPE html
	PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
	<meta http-equiv="Content-Type" content="text/html;
	charset=UTF-8" />
	<link href="http://directlabels.r-forge.r-project.org/estilo1.css"
	rel="stylesheet" type="text/css" />
	<title>directlabels documentation - calc.boxes</title>
  </head>

<body>

<h1><a href="../../index.html">directlabels</a> - utility.function -
Positioning Function - calc.boxes</h1>

<p>Calculate boxes around labels, for collision detection.</p>

<pre>
calc.boxes &lt;- function(d,...){
  vp &lt;- current.viewport()
  convert &lt;- function(worh){
    conv &lt;- get(paste("convert",worh,sep=""))
    stri &lt;- get(paste("string",worh,sep=""))
    with(d,sapply(seq_along(groups),function(i){
      if("cex"%in%names(d))vp$gp &lt;- gpar(cex=cex[i])
      pushViewport(vp)
      w &lt;- conv(stri(as.character(groups[i])),"native")
      popViewport()
      w
    }))
  }
  w &lt;- convert("Width")
  h &lt;- convert("Height")
  hjust &lt;- vjust &lt;- 0.5 ##defaults in case unassigned in d
  d &lt;- transform(d,
                 top=y+(1-vjust)*h,bottom=y-vjust*h,
                 right=x+(1-hjust)*w,left=x-hjust*w,
                 h=h,w=w)
}
</pre>



<center>
<table>
<tr><td>Please send email
to <a href="http://r-forge.r-project.org/sendmessage.php?touser=1571">Toby
Dylan Hocking</a> if you are using <a href="http://directlabels.r-forge.r-project.org/">directlabels</a> or have ideas to
contribute, thanks!</td>
</tr>
<tr><td align="center">Documentation website generated from comments
in R source code
using <a href="http://inlinedocs.r-forge.r-project.org">inlinedocs</a>.</td>
</tr>
<tr>
<td align="center">
    <a href="http://validator.w3.org/check?uri=referer">validate</a>
</td>
</tr>
</table>

</center>

</body>

</html>
